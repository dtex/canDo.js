var CanDo=function(e,g){var b,i,h=0,j=function(){h-=1;0===h&&(b.t.splash&&b.update({time:0}),b.s.loaded=!0)};b=e.getContext("2d");b.t={duration:1E3,frameRate:30,cuePoints:{},mode:"",wait:!0,splash:!0,easing:"linear"};b.s={time:0,easedTime:0,speed:1,startTime:0,endTime:0,intervalTimer:0,loaded:!0,height:e.height,width:e.width};b.configure=function(a){var d,c;"undefined"!==typeof a.duration&&(this.t.duration=a.duration);"undefined"!==typeof a.frameRate&&(this.t.frameRate=a.frameRate);"undefined"!==
typeof a.cuePoints&&(this.t.cuePoints=a.cuePoints);"undefined"!==typeof a.mode&&(this.t.mode=a.mode);"undefined"!==typeof a.wait&&(this.t.wait=a.wait);"undefined"!==typeof a.splash&&(this.t.splash=a.splash);"undefined"!==typeof a.easing&&(this.t.easing=a.easing);this.t.frameInterval=Math.floor(1E3/this.t.frameRate);"undefined"!==typeof a.setTime&&(this.s.time=a.setTime);"undefined"!==typeof a.setTime&&(this.s.easedTime=a.setTime);"undefined"!==typeof a.speed&&(this.s.speed=a.speed);if("undefined"!==
typeof a.images)for(d in this.s.loaded=!1,this.images=a.images,this.images)this.images.hasOwnProperty(d)&&(h+=1,this.images[d].img=new Image,this.images[d].img.onload=j,this.images[d].img.src=this.images[d].url);"undefined"!==typeof a.paint&&(this.paint=a.paint);if("undefined"!==typeof a.events)for(c in a.events)a.events.hasOwnProperty(c)&&(e.addEventListener?e.addEventListener(c,a.events[c],!1):e.attachEvent&&e.attachEvent("on"+c,a.events[c]))};b.play=function(a){"undefined"!==typeof a&&this.configure(a);
this.t.scaledDuration=Math.abs(this.t.duration/this.s.speed);a=0>this.s.speed?1-this.s.time:this.s.time;this.s.startTime=0===this.s.time?Date.now():Date.now()-b.t.scaledDuration*a;this.s.endTime=this.s.startTime+this.t.scaledDuration;this.s.intervalTimer=setInterval(function(a){a.update()},this.t.frameInterval,this);this.update()};b.update=function(a){"undefined"===typeof a&&(a={});this.configure(a);this.s.time="undefined"===typeof a.time?0<this.s.speed?(Date.now()-this.s.startTime)/this.t.scaledDuration:
(this.s.endTime-Date.now())/this.t.scaledDuration:a.time;this.s.easedTime=this.easing[this.t.easing](this.s.time);if(1>this.s.time&&0<this.s.speed||0<this.s.time&&0>this.s.speed)this.paint();else if(""===this.t.mode&&(clearInterval(this.s.intervalTimer),this.s.time=0<this.s.speed?1:0,this.s.easedTime=0<this.s.speed?1:0,this.paint()),"loop"===this.t.mode)this.s.time=0<this.s.speed?1:0,this.s.easedTime=0<this.s.speed?1:0,this.paint(),this.s.time=0<this.s.speed?0:1,this.s.easedTime=0<this.s.speed?0:
1,this.play({time:0})};b.getCurrentKeyframe=function(a){var d,c,b={start:0,end:1};d=0;for(c=a.length;d<c;d+=1)if("string"===typeof a[d].cuePoint&&(a[d].cuePoint=this.t.cuePoints[a[d].cuePoint]),a[d].cuePoint<=this.s.easedTime)b.start=d,b.end=d+1;b.end===a.length&&(b.end=a.length-1,b.start=b.end-1);b.subDuration=a[b.end].cuePoint-a[b.start].cuePoint;b.subTime=(this.s.easedTime-a[b.start].cuePoint)/b.subDuration;return b};b.identity=function(){this.setTransform(1,0,0,1,0,0)};b.canDo=function(a,d){var c=
this.getCurrentKeyframe(d),c=b.easeThis(d[c.end].easing||"linear",c.subTime,d[c.start].params,d[c.end].params);return this[a].apply(this,c)};b.canSet=function(a,d){var c=this.getCurrentKeyframe(d),c=b.easeThis(d[c.end].easing||"linear",c.subTime,d[c.start].params,d[c.end].params);this[a]=c[0]};b.easeThis=function(a,d,c,e){var f,h=c.length,g=[],i;for(f=0;f<h;f+=1)!isNaN(parseFloat(c[f]))&&isFinite(c[f])?(i=b.easing[a](d),g.push((e[f]-c[f])*i+c[f])):g.push(c[f]);return g};b.each=function(a,b){var c,
e=a.length;if(void 0===e)for(c in a){if(a.hasOwnProperty(c)&&!1===b.call(a[c],c,a[c]))break}else for(c=0;c<e&&!1!==b.call(a[c],c,a[c]);c+=1);};b.easing={linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}};i={Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<
((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}};b.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){i[b]=function(c){return Math.pow(c,a+2)}});b.each(i,function(a,d){b.easing["easeIn"+a]=d;b.easing["easeOut"+a]=function(a){return 1-d(1-a)};b.easing["easeInOut"+a]=function(a){return 0.5>a?d(2*a)/2:d(-2*a+2)/-2+1}});b.configure(g);"undefined"!==typeof g.init&&g.init(b);"undefined"===typeof g.images&&b.t.splash&&b.update({time:0});return b};