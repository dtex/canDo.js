var CanDo=function(m,j){var h=document.getElementById(m),b,k,i=0,l={black:[0,0,0,1],blue:[0,0,255,1],green:[0,128,0,1],red:[255,0,0,1],white:[255,255,255,1],transparent:[0,0,0,0]},n=function(){i-=1;0===i&&(b.t.splash&&b.update({time:0}),b.s.loaded=!0)};h.ctx=b=h.getContext("2d");b.t={duration:1E3,frameRate:30,cuePoints:{},mode:"",wait:!0,splash:!0,easing:"linear"};b.s={time:0,easedTime:0,speed:0,startTime:0,endTime:0,intervalTimer:0,loaded:!0,height:h.height,width:h.width,canvasEvents:{},eventsCue:{},
currentEvents:{}};b.p={};b.configure=function(a){var c;"undefined"!==typeof a.duration&&(this.t.duration=a.duration);"undefined"!==typeof a.frameRate&&(this.t.frameRate=a.frameRate);"undefined"!==typeof a.cuePoints&&(this.t.cuePoints=a.cuePoints);"undefined"!==typeof a.mode&&(this.t.mode=a.mode);"undefined"!==typeof a.wait&&(this.t.wait=a.wait);"undefined"!==typeof a.splash&&(this.t.splash=a.splash);"undefined"!==typeof a.easing&&(this.t.easing=a.easing);this.t.frameInterval=Math.floor(1E3/this.t.frameRate);
"undefined"!==typeof a.setTime&&(this.s.time=a.setTime);"undefined"!==typeof a.setTime&&(this.s.easedTime=a.setTime);"undefined"!==typeof a.speed&&(this.s.speed=a.speed);if("undefined"!==typeof a.images)for(c in this.s.loaded=!1,this.images=a.images,this.images)this.images.hasOwnProperty(c)&&(i+=1,this.images[c].img=new Image,this.images[c].img.onload=n,this.images[c].img.src=this.images[c].url);"undefined"!==typeof a.paint&&(this.paint=a.paint);"undefined"!==typeof a.events&&(b.s.canvasEvents=a.events)};
b.play=function(a){clearInterval(this.s.intervalTimer);"undefined"!==typeof a&&this.configure(a);this.t.scaledDuration=Math.abs(this.t.duration/this.s.speed);a=0>this.s.speed?1-this.s.time:this.s.time;this.s.startTime=0===this.s.time?Date.now():Date.now()-b.t.scaledDuration*a;this.s.endTime=this.s.startTime+this.t.scaledDuration;this.s.intervalTimer=setInterval(function(a){a.update()},this.t.frameInterval,this);this.update()};b.update=function(a){"undefined"===typeof a&&(a={});this.configure(a);"undefined"===
typeof a.time?0<this.s.speed?this.s.time=(Date.now()-this.s.startTime)/this.t.scaledDuration:0>this.s.speed&&(this.s.time=(this.s.endTime-Date.now())/this.t.scaledDuration):this.s.time=a.time;this.s.easedTime=this.easing[this.t.easing](this.s.time);b.s.currentEvents=b.s.eventsCue;b.s.eventsCue={};this.doCanvasEvents();if("undefined"!==typeof a.still||1>this.s.time&&0<this.s.speed||0<this.s.time&&0>this.s.speed)this.paint();else if(""===this.t.mode&&(clearInterval(this.s.intervalTimer),this.s.time=
0<this.s.speed?1:0,this.s.easedTime=0<this.s.speed?1:0,this.paint(),this.s.speed=0),"loop"===this.t.mode)this.s.time=0<this.s.speed?1:0,this.s.easedTime=0<this.s.speed?1:0,this.paint(),this.s.time=0<this.s.speed?0:1,this.play({time:0})};b.doCanvasEvents=function(){b.each(b.s.currentEvents,function(a){b.s.canvasEvents[a].apply(this)})};b.getCurrentKeyframe=function(a){var c,b=a.length,d={start:0,end:1};"undefined"===typeof a[0].cuePoint&&(a[0].cuePoint=0);"undefined"===typeof a[b-1].cuePoint&&(a[b-
1].cuePoint=1);for(c=0;c<b;c+=1)if("string"===typeof a[c].cuePoint&&(a[c].cuePoint=this.t.cuePoints[a[c].cuePoint]),a[c].cuePoint<=this.s.easedTime)d.start=c,d.end=c+1;d.end===a.length&&(d.end=a.length-1,d.start=d.end);d.subDuration=a[d.end].cuePoint-a[d.start].cuePoint;d.subTime=(this.s.easedTime-a[d.start].cuePoint)/d.subDuration;return d};b.getRGB=function(a){var c;return a&&a.constructor===Array&&(3===a.length||4===a.length)?(a.push(1),a):(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9.]{1,3})\s*\)/.exec(a))?
[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),Number(c[4])]:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),1]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),1]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],
16),1]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16),1]:/rgba\(0, 0, 0, 0\)/.exec(a)?l.transparent:l[a.toLowerCase()]};b.identity=function(){this.setTransform(1,0,0,1,0,0)};b.canDo=function(a,c){var f,d,e=this.getCurrentKeyframe(c);f=e.start===e.end?c[e.start].params:b.easeThis(c[e.end].easing||"linear",e.subTime,c[e.start].params,c[e.end].params);if(e.start!==e.end||1===c[e.end].cuePoint||1!==c[e.end].cuePoint&&!0===c[e.end].persist)d=
this[a].apply(this,f);return d};b.canSet=function(a,c){var f,d=this.getCurrentKeyframe(c);f=d.start===d.end?c[d.start].params:b.easeThis(c[d.end].easing||"linear",d.subTime,c[d.start].params,c[d.end].params);if(d.start!==d.end||1===c[d.end].cuePoint||1!==c[d.end].cuePoint&&!0===c[d.end].persist)this[a]=f[0]};b.canBeginPath=function(a){if("undefined"!==typeof a&&("undefined"!==typeof a.easing&&(b.p.easing=a.easing),"undefined"!==typeof a.events))b.p.events=a.events;this.beginPath()};b.canClosePath=
function(){"undefined"!==typeof b.p.events&&b.each(b.p.events,function(a){"undefined"!==typeof b.s.currentEvents[a]&&b.isPointInPath(b.s.currentEvents[a].x,b.s.currentEvents[a].y)&&b.p.events[a].apply(this)});b.p={};this.closePath()};b.easeThis=function(a,c,f,d){var e,h=f.length,i=[],g,j;for(e=0;e<h;e+=1)!isNaN(parseFloat(f[e]))&&isFinite(f[e])?(g=b.easing[a](c),"undefined"!==typeof b.p.easing&&(g=b.easing[b.p.easing](g)),i.push((d[e]-f[e])*g+f[e])):"string"===typeof f[e]&&("rgb"===f[e].substring(0,
3)||"#"===f[e].substring(0,1))?(g=b.getRGB(f[e]),j=b.getRGB(d[e]),g=b.easeThis(a,c,g,j),i.push("rgba("+Math.floor(Number(g[0]))+","+Math.floor(Number(g[1]))+","+Math.floor(Number(g[2]))+","+Number(g[3])+")")):i.push(f[e]);return i};b.each=function(a,c){var b,d=a.length;if(void 0===d)for(b in a){if(a.hasOwnProperty(b)&&!1===c.call(a[b],b,a[b]))break}else for(b=0;b<d&&!1!==c.call(a[b],b,a[b]);b+=1);};b.easing={linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5}};k={Sine:function(a){return 1-
Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var c,b=4;a<((c=Math.pow(2,--b))-1)/11;);return 1/Math.pow(4,3-b)-7.5625*Math.pow((3*c-2)/22-a,2)}};b.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){k[b]=function(b){return Math.pow(b,a+2)}});b.each(k,function(a,c){b.easing["easeIn"+a]=c;b.easing["easeOut"+a]=function(a){return 1-
c(1-a)};b.easing["easeInOut"+a]=function(a){return 0.5>a?c(2*a)/2:c(-2*a+2)/-2+1}});b.configure(j);b.each(["click","mouseover","mouseout"],function(a,b){h.addEventListener?h.addEventListener(b,function(a){this.ctx.s.eventsCue[b]={x:a.offsetX,y:a.offsetY};0===h.ctx.s.speed&&this.ctx.update({still:!0})},!1):h.addEventListener("on"+b,function(a){this.ctx.s.eventsCue.name={x:a.offsetX,y:a.offsetY}},!1)});"undefined"!==typeof j.init&&j.init(b);"undefined"===typeof j.images&&b.t.splash&&b.update({time:0});
return b};