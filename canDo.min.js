var CanDo=function(a,b){"use strict";var c=document.getElementById(a),d,e,f=0,g=function(){f=f-1,f===0&&(d.s.splash&&d.update({time:0}),d.s.loaded=!0)};return c.ctx=d=c.getContext("2d"),d.s={duration:1e3,frameRate:60,cuePoints:{},mode:"",wait:!0,splash:!0,easing:"linear",time:0,easedTime:0,speed:0,startTime:0,endTime:0,intervalTimer:0,loaded:!0,canvasEvents:{},eventsQueue:{},eventHandlerQueue:[],currentEvents:{},eventProp:"all",currentCuePoints:{}},d.p={},d.configure=function(a){var b,c;if(typeof a!="undefined"){d.extend(this.s,a),typeof a.setTime!="undefined"&&(this.s.easedTime=this.s.time=a.setTime);if(typeof a.images!="undefined"){this.s.loaded=!1,this.images=a.images;for(b in this.images)this.images.hasOwnProperty(b)&&(f=f+1,this.images[b].img=new Image,this.images[b].img.onload=g,this.images[b].img.src=this.images[b].url)}typeof a.paint!="undefined"&&(this.paint=a.paint),typeof a.events!="undefined"&&(d.s.canvasEvents=a.events),this.s.frameInterval=Math.floor(1e3/d.s.frameRate)}},d.play=function(a){var b;clearInterval(this.s.intervalTimer),typeof a!="undefined"&&this.configure(a),this.s.wait&&this.s.loaded===!1&&setInterval(function(a,b){a.play(b)},100,this,a),this.s.scaledDuration=Math.abs(this.s.duration/this.s.speed),b=this.s.speed<0?1-this.s.time:this.s.time,this.s.startTime=this.s.time===0?Date.now():Date.now()-d.s.scaledDuration*b,this.s.endTime=this.s.startTime+this.s.scaledDuration,this.s.intervalTimer=setInterval(function(a){a.update()},this.s.frameInterval,this),this.update()},d.update=function(a){typeof a=="undefined"?a={}:this.configure(a),typeof a.time=="undefined"?this.s.speed>0?this.s.time=(Date.now()-this.s.startTime)/this.s.scaledDuration:this.s.speed<0&&(this.s.time=(this.s.endTime-Date.now())/this.s.scaledDuration):this.s.time=a.time,this.s.easedTime=this.easing[this.s.easing](this.s.time),d.s.currentEvents=d.s.eventsQueue,d.s.eventsQueue={},typeof a.still!="undefined"||this.s.time<1&&this.s.speed>0||this.s.time>0&&this.s.speed<0?this.paint():(this.s.mode===""&&(clearInterval(this.s.intervalTimer),this.s.time=this.s.speed>0?1:0,this.s.easedTime=this.s.speed>0?1:0,this.paint(),this.s.speed=0),this.s.mode==="loop"&&(this.s.easedTime=this.s.time=this.s.speed>0?1:0,this.paint(),this.s.easedTime=this.s.time=this.s.speed>0?0:1,this.play({time:0}))),this.doCanvasEvents(),this.doEventHandlerQueue()},d.doCanvasEvents=function(){d.each(d.s.currentEvents,function(a,b){typeof d.s.canvasEvents[b]!="undefined"&&d.s.canvasEvents[b].apply(this)})},d.doEventHandlerQueue=function(){d.s.eventHandlerQueue.length>0&&(d.s.eventProp==="first"?d.s.eventHandlerQueue[0].apply(this):d.s.eventProp==="last"?d.s.eventHandlerQueue.pop().apply(this):d.each(d.s.eventHandlerQueue,function(a,b){a.apply(this)})),d.s.eventHandlerQueue=[]},d.getCurrentKeyframe=function(a){var b,c=a.length,d={start:0,end:1};typeof a[0].cuePoint=="undefined"&&(a[0].cuePoint=0),typeof a[c-1].cuePoint=="undefined"&&(a[c-1].cuePoint=1);for(b=0;b<c;b=b+1)typeof a[b].cuePoint=="string"&&(a[b].cuePoint=this.s.cuePoints[a[b].cuePoint]),a[b].cuePoint<=this.s.easedTime&&(d.start=b,d.end=b+1);return d.end===a.length&&(d.end=a.length-1,d.start=d.end),d.subDuration=a[d.end].cuePoint-a[d.start].cuePoint,d.subTime=(this.s.easedTime-a[d.start].cuePoint)/d.subDuration,d},d.getCurrentCuePoints=function(){!(this.s.currentCuepoints.start!=="undefined"||this.s.currentCuepoints.end!=="undefined"||this.s.currentCuepoints.start.time>this.s.time||this.s.currentCuepoints.end.time<this.s.time)},d.getRGB=function(a){var b;return!a||a.constructor!==Array||a.length!==3&&a.length!==4?(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9.]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),Number(b[4])]:(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))?[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),1]:(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))?[parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55,1]:(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))?[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1]:(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))?[parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16),1]:(b=/rgba\(0, 0, 0, 0\)/.exec(a))?[0,0,0,0]:[0,0,0,0]:(a.push(1),a)},d.identity=function(){return this.setTransform(1,0,0,1,0,0),d},d.canDo=function(a,b){var c,e,f=this.getCurrentKeyframe(b);f.start===f.end?c=b[f.start].params:c=d.easeThis(b[f.end].easing||"linear",f.subTime,b[f.start].params,b[f.end].params);if(f.start!==f.end||b[f.end].cuePoint===1||b[f.end].cuePoint!==1&&b[f.end].persist===!0)e=this[a].apply(this,c);return d},d.canSet=function(a,b){var c,e,f=this.getCurrentKeyframe(b);f.start===f.end?c=b[f.start].params:c=d.easeThis(b[f.end].easing||"linear",f.subTime,b[f.start].params,b[f.end].params);if(f.start!==f.end||b[f.end].cuePoint===1||b[f.end].cuePoint!==1&&b[f.end].persist===!0)this[a]=c[0];return d},d.canBeginPath=function(a){return typeof a!="undefined"&&(typeof a.easing!="undefined"&&(d.p.easing=a.easing),typeof a.events!="undefined"&&(d.p.events=a.events)),this.beginPath(),d},d.canClosePath=function(){return typeof d.p.events!="undefined"&&d.each(d.p.events,function(a,b){typeof d.s.currentEvents[b]!="undefined"&&d.isPointInPath(d.s.currentEvents[b].x,d.s.currentEvents[b].y)===!0&&d.s.eventHandlerQueue.push(d.p.events[b])}),d.p={},this.closePath(),d},d.canShadow=function(){return this.shadowColor(arguments[0]),this.shadowOffsetX(arguments[1]),this.shadowOffsetY(arguments[2]),this.shadowBlur(arguments[3]),d},d.easeThis=function(a,b,c,e){var f,g=c.length,h=[],i,j,k,l;for(f=0;f<g;f=f+1)!isNaN(parseFloat(c[f]))&&isFinite(c[f])?(i=d.easing[a](b),typeof d.p.easing!="undefined"&&(i=d.easing[d.p.easing](i)),h.push((e[f]-c[f])*i+c[f])):typeof c[f]!="string"||c[f].substring(0,3)!=="rgb"&&c[f].substring(0,1)!=="#"?h.push(c[f]):(j=d.getRGB(c[f]),k=d.getRGB(e[f]),l=d.easeThis(a,b,j,k),h.push("rgba("+Math.floor(Number(l[0]))+","+Math.floor(Number(l[1]))+","+Math.floor(Number(l[2]))+","+Number(l[3])+")"));return h},d.each=function(a,b,c){if(a==null)return;if(Array.prototype.forEach&&a.forEach)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(c,a[e],e,a)==={})return}else for(var g in a)if(d.has(a,g)&&b.call(c,a[g],g,a)==={})return},d.has=function(a,b){return hasOwnProperty.call(a,b)},d.extend=function(){var a,b,c,d,e=arguments[0]||{},f=1,g=arguments.length;for(;f<g;f++)if((a=arguments[f])!=null)for(b in a)c=e[b],d=a[b],e[b]=d;return e},d.easing={linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},e={Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){var b,c=4;while(a<((b=Math.pow(2,--c))-1)/11);return 1/Math.pow(4,3-c)-7.5625*Math.pow((b*3-2)/22-a,2)}},d.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){e[a]=function(a){return Math.pow(a,b+2)}}),d.each(e,function(a,b){d.easing["easeIn"+b]=a,d.easing["easeOut"+b]=function(b){return 1-a(1-b)},d.easing["easeInOut"+b]=function(b){return b<.5?a(b*2)/2:a(b*-2+2)/-2+1}}),d.each(d.__proto__,function(a,b){d[b]=function(){return a.apply(this,arguments)||this}}),d.configure(b),d.each(["click","mouseover","mouseout"],function(a,b){c.addEventListener?c.addEventListener(a,function(b){this.ctx.s.eventsQueue[a]={x:b.offsetX,y:b.offsetY},c.ctx.s.speed===0&&this.ctx.update({still:!0})},!1):c.addEventListener("on"+a,function(a){this.ctx.s.eventsQueue.name={x:a.offsetX,y:a.offsetY}},!1)}),typeof b.init!="undefined"&&b.init(d),typeof b.images=="undefined"&&d.s.splash&&d.update({time:0}),d}